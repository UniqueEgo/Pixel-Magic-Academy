<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SYSTEM FATAL ERROR</title>
  <link rel="stylesheet" href="../css/error.css">
  <link href="https://fonts.googleapis.com/css2?family=Pixelify+Sans:wght@400..700&display=swap" rel="stylesheet">
</head>
<body>

  <div class="center-box">
    <h1>⚠️ SYSTEM FAILURE ⚠️</h1>
    <p>Anomaly Detected. Universe Reset Required.</p>
    <button onclick="window.location.href='../index.html'">RESTART SIMULATION</button>
  </div>

  <script>
    const allChars = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*()_+-=[]{}|;':\",./<>?";
    const asteroids = [];

    // Create 1 element for every character in the list
    for (let i = 0; i < allChars.length; i++) {
      const el = document.createElement("div");
      el.classList.add("asteroid");
      el.textContent = allChars[i];
      document.body.appendChild(el);

      // Random starting position
      const x = Math.random() * (window.innerWidth - 30);
      const y = Math.random() * (window.innerHeight - 30);

      // Random velocity (speed & direction)
      // Speed between -1.5 and 1.5 pixels per frame
      const vx = (Math.random() - 0.5) * 3; 
      const vy = (Math.random() - 0.5) * 3;

      asteroids.push({ el, x, y, vx, vy });
    }

    function animate() {
      const w = window.innerWidth;
      const h = window.innerHeight;

      asteroids.forEach(obj => {
        // Update Position
        obj.x += obj.vx;
        obj.y += obj.vy;

        // Bounce Logic (Horizontal)
        if (obj.x <= 0 || obj.x >= w - 30) {
          obj.vx *= -1; // Reverse direction
        }

        // Bounce Logic (Vertical)
        if (obj.y <= 0 || obj.y >= h - 30) {
          obj.vy *= -1; // Reverse direction
        }

        // Apply new position
        obj.el.style.transform = `translate(${obj.x}px, ${obj.y}px)`;
        
        // Optional: Randomly brighten some characters like stars flickering
        if(Math.random() > 0.99) {
            obj.el.style.color = "#0f0";
            obj.el.style.textShadow = "0 0 10px #0f0";
        } else if (Math.random() > 0.99) {
            obj.el.style.color = "#005500";
            obj.el.style.textShadow = "none";
        }
      });

      requestAnimationFrame(animate);
    }

    // Start the loop
    animate();
  </script>

</body>
</html>